# Control 2.16: RAG Source Integrity Validation

## Overview

**Control ID:** 2.16
**Control Name:** RAG Source Integrity Validation
**Regulatory Reference:** Fed SR 11-7, FDIC FIL-15-2025, OCC 2011-12, FINRA 4511
**Setup Time:** 3-4 hours

---

### Purpose

Establish governance over knowledge sources used for Retrieval-Augmented Generation (RAG) in Microsoft 365 Copilot and Copilot Studio agents. This control ensures that content used to ground agent responses is accurate, current, approved, and properly attributed. For financial services organizations, RAG source integrity is critical for model risk management and ensuring agents provide reliable information to users and customers.

!!! info "RAG in Microsoft 365 Context"
    RAG enables AI agents to retrieve relevant content from organizational knowledge bases (SharePoint, OneDrive, Teams) to ground their responses. The quality and governance of these source materials directly impacts the accuracy and reliability of agent outputs.

---

### Description

RAG Source Integrity Validation establishes processes to ensure knowledge sources meet quality and governance standards before being used to ground AI agent responses. Key capabilities include:

- **Source Approval Workflow:** Formal approval before content becomes agent knowledge
- **Content Versioning:** Track changes to knowledge sources over time
- **Integrity Verification:** Validate source content hasn't been tampered with
- **Citation Logging:** Track which sources agents use in responses
- **Staleness Detection:** Identify outdated content requiring refresh

See [Copilot Studio knowledge sources](https://learn.microsoft.com/en-us/microsoft-copilot-studio/knowledge-copilot-studio) for platform capabilities.

---

### Key Capabilities

| Capability | Description | FSI Relevance |
|------------|-------------|---------------|
| **Source Approval** | Formal workflow for knowledge source approval | Governance evidence |
| **Version Control** | Track changes to source content | Audit trail |
| **Citation Tracking** | Log which sources ground responses | Attribution and accuracy |
| **Staleness Alerts** | Detect outdated knowledge sources | Data quality |
| **Integrity Checks** | Validate source authenticity | Tamper detection |

---

## Prerequisites

**Primary Owner Admin Role:** AI Governance Lead
**Supporting Roles:** SharePoint Admin, Power Platform Admin, Compliance Officer

### Licenses Required

| License | Purpose | Required For |
|---------|---------|--------------|
| Microsoft 365 E3/E5 | SharePoint and content services | All levels |
| Power Platform per-user | Copilot Studio agent development | Agent creators |
| SharePoint Advanced Management | Enhanced governance | Level 2+ |
| Microsoft Purview | Audit logging and compliance | Level 4 |

### Permissions Required

| Role | Purpose | Assignment Method |
|------|---------|-------------------|
| AI Governance Lead | Approve knowledge sources | Business role |
| Power Platform Admin | Agent and knowledge configuration | Entra ID |
| SharePoint Admin | Site and content governance | Entra ID |
| Content Owner | Certify content accuracy | Business role |

### Dependencies

| Dependency | Description | Verification |
|------------|-------------|--------------|
| Control 2.6 (Model Risk) | MRM framework for agent governance | Check MRM process |
| Control 3.1 (Agent Inventory) | Agent metadata including knowledge sources | Verify inventory |
| Control 4.1 (IAG/RCD) | Site access governance | Check IAG config |
| Control 4.6 (Grounding Scope) | Content inclusion/exclusion | Verify scope rules |

### Pre-Setup Checklist

- [ ] Agent inventory with knowledge sources documented
- [ ] Content owner identification for each knowledge source
- [ ] Approval workflow process defined
- [ ] Version control strategy established
- [ ] Citation logging capability confirmed
- [ ] Staleness thresholds defined by content type

---

## Governance Levels

### Baseline (Level 1)

| Requirement | Configuration |
|-------------|---------------|
| Source documentation | Document all knowledge sources per agent |
| Content owner | Identify owner for each source |
| Annual review | Yearly review of source accuracy |

**Minimum requirements:**

- Maintain inventory of knowledge sources per agent
- Assign content owner for each source
- Annual certification that content is accurate
- Document source locations in agent metadata

### Recommended (Level 2-3)

| Requirement | Configuration |
|-------------|---------------|
| Formal approval | Approval workflow before source activation |
| Quarterly review | Quarterly content accuracy review |
| Version tracking | Track content changes |
| Citation logging | Log which sources agents cite |

**FSI recommendations:**

- Implement approval workflow for new knowledge sources
- Quarterly review of source content for accuracy
- Track version history of knowledge documents
- Enable citation logging in audit
- Configure staleness alerts for content >90 days unchanged

### Regulated/High-Risk (Level 4)

| Requirement | Configuration |
|-------------|---------------|
| Strict approval | Multi-level approval for Tier 3 agent sources |
| Real-time monitoring | Continuous integrity monitoring |
| Full citation audit | Complete citation trail for all responses |
| Automated validation | Automated content freshness checks |

**FSI considerations (high-risk):**

- Multi-level approval (Content Owner + Compliance + AI Governance)
- Monthly content accuracy certification
- Real-time monitoring for unauthorized changes
- Full citation logging with source attribution
- Automated alerts for stale or modified content
- Integration with model risk management process

---

## Setup & Configuration

### Step 1: Establish Knowledge Source Inventory

**Create Knowledge Source Registry:**

Extend the agent inventory (Control 3.1) with knowledge source details:

| Field | Description | Example |
|-------|-------------|---------|
| Agent ID | Unique agent identifier | AGT-2026-001 |
| Agent Name | Agent display name | Customer Service Bot |
| Knowledge Source Type | SharePoint, File, URL, etc. | SharePoint Site |
| Source Location | URL or path | `https://tenant.sharepoint.com/sites/KB` |
| Content Owner | Business owner | knowledge@contoso.com |
| Approval Status | Pending, Approved, Revoked | Approved |
| Approval Date | When approved | 2026-01-15 |
| Approved By | Approver name | AI Governance Lead |
| Last Review Date | Most recent review | 2026-01-15 |
| Next Review Due | Scheduled review | 2026-04-15 |
| Staleness Threshold | Days before stale alert | 90 |
| Content Classification | Sensitivity level | Confidential |

**PowerShell to Export Current Knowledge Sources:**

```powershell
# Connect to Power Platform
Connect-PowerPlatform

# Note: Copilot Studio API access required
# This shows conceptual approach - actual implementation depends on available APIs

function Get-AgentKnowledgeSources {
    param([string]$EnvironmentId)

    # Get all agents in environment
    $agents = Get-AdminPowerAppAgent -EnvironmentName $EnvironmentId

    $knowledgeSources = @()

    foreach ($agent in $agents) {
        # Get agent configuration including knowledge sources
        $config = Get-AdminPowerAppAgentConfiguration -AgentId $agent.AgentId

        foreach ($source in $config.KnowledgeSources) {
            $knowledgeSources += [PSCustomObject]@{
                AgentId = $agent.AgentId
                AgentName = $agent.DisplayName
                SourceType = $source.Type
                SourceLocation = $source.Url
                LastModified = $source.LastModified
            }
        }
    }

    return $knowledgeSources
}

# Export knowledge sources
# $sources = Get-AgentKnowledgeSources -EnvironmentId "env-guid"
# $sources | Export-Csv -Path "Knowledge-Sources.csv" -NoTypeInformation
```

### Step 2: Implement Approval Workflow

**Option A: SharePoint List-Based Workflow**

Create SharePoint list for knowledge source approval:

1. **Create approval list columns:**

   | Column | Type | Required |
   |--------|------|----------|
   | Title | Single line | Yes |
   | Agent Name | Single line | Yes |
   | Source Type | Choice | Yes |
   | Source URL | Hyperlink | Yes |
   | Content Owner | Person | Yes |
   | Business Justification | Multi-line | Yes |
   | Content Description | Multi-line | Yes |
   | Sensitivity Classification | Choice | Yes |
   | Approval Status | Choice | Yes |
   | Approved By | Person | No |
   | Approval Date | Date | No |
   | Review Due Date | Date | No |
   | Comments | Multi-line | No |

2. **Configure Power Automate approval flow:**

```plaintext
Trigger: When item created in Knowledge Source Approvals list

Actions:
├── Get Content Owner details
├── Start Approval (Content Owner)
│   └── If Approved by Content Owner:
│       ├── Start Approval (AI Governance Lead)
│       │   └── If Approved by AI Governance:
│       │       ├── Update list: Status = "Approved"
│       │       ├── Set Review Due Date (+ 90 days)
│       │       ├── Send notification to requestor
│       │       └── Log to audit
│       │   └── If Rejected:
│       │       ├── Update list: Status = "Rejected"
│       │       └── Send rejection notice with comments
│   └── If Rejected by Content Owner:
│       ├── Update list: Status = "Rejected"
│       └── Send rejection notice
```

**Option B: Forms-Based Approval (Simpler)**

Create Microsoft Forms for knowledge source requests:

- Requestor fills out form with source details
- Form submission triggers Power Automate
- Approvals routed via email/Teams
- Results logged to SharePoint list

### Step 3: Configure Citation Logging

**Enable Citation Tracking in Audit Logs:**

Citation logging captures which knowledge sources agents reference in responses:

```kql
// Query Copilot Studio agent citations
CopilotStudioLogs
| where TimeGenerated > ago(7d)
| where Operation == "AgentResponse"
| extend Citations = parse_json(ResponseMetadata).Citations
| mv-expand Citation = Citations
| project
    TimeGenerated,
    AgentId,
    AgentName,
    UserId,
    SourceUrl = tostring(Citation.SourceUrl),
    SourceTitle = tostring(Citation.Title),
    ConfidenceScore = todouble(Citation.Confidence),
    ResponseSnippet = substring(ResponseText, 0, 200)
| order by TimeGenerated desc
```

**Create Citation Summary Report:**

```kql
// Citation frequency by source
CopilotStudioLogs
| where TimeGenerated > ago(30d)
| where Operation == "AgentResponse"
| extend Citations = parse_json(ResponseMetadata).Citations
| mv-expand Citation = Citations
| summarize
    CitationCount = count(),
    UniqueUsers = dcount(UserId),
    AvgConfidence = avg(todouble(Citation.Confidence))
    by SourceUrl = tostring(Citation.SourceUrl), AgentId
| order by CitationCount desc
| take 50
```

### Step 4: Implement Content Integrity Checks

**Track SharePoint Content Changes:**

```powershell
function Get-KnowledgeSourceChanges {
    param(
        [string]$SiteUrl,
        [int]$DaysBack = 30
    )

    Connect-PnPOnline -Url $SiteUrl -Interactive

    $startDate = (Get-Date).AddDays(-$DaysBack)

    # Get all items modified in the period
    $lists = Get-PnPList | Where-Object { $_.Hidden -eq $false }

    $changes = @()

    foreach ($list in $lists) {
        $items = Get-PnPListItem -List $list.Title -Query "
            <View>
                <Query>
                    <Where>
                        <Geq>
                            <FieldRef Name='Modified' />
                            <Value Type='DateTime'>$($startDate.ToString('yyyy-MM-ddTHH:mm:ss'))Z</Value>
                        </Geq>
                    </Where>
                </Query>
            </View>"

        foreach ($item in $items) {
            $changes += [PSCustomObject]@{
                SiteUrl = $SiteUrl
                ListName = $list.Title
                ItemId = $item.Id
                Title = $item["Title"]
                Modified = $item["Modified"]
                ModifiedBy = $item["Editor"].Email
                ChangeType = if ($item["Created"] -ge $startDate) { "Created" } else { "Modified" }
            }
        }
    }

    return $changes
}

# Check knowledge source for changes
$changes = Get-KnowledgeSourceChanges -SiteUrl "https://tenant.sharepoint.com/sites/KB" -DaysBack 30
$changes | Export-Csv -Path "KB-Changes.csv" -NoTypeInformation
Write-Host "Found $($changes.Count) changes in knowledge source"
```

**Calculate Content Hash for Integrity:**

```powershell
function Get-DocumentHash {
    param([string]$FileUrl)

    Connect-PnPOnline -Url $FileUrl -Interactive

    # Download file content
    $fileContent = Get-PnPFile -Url $FileUrl -AsMemoryStream

    # Calculate SHA256 hash
    $hasher = [System.Security.Cryptography.SHA256]::Create()
    $hash = $hasher.ComputeHash($fileContent.ToArray())
    $hashString = [BitConverter]::ToString($hash) -replace '-', ''

    return $hashString
}

# Store hashes for integrity verification
function Update-KnowledgeSourceHashes {
    param([string]$SiteUrl)

    Connect-PnPOnline -Url $SiteUrl -Interactive

    $files = Get-PnPFolderItem -FolderSiteRelativeUrl "Shared Documents" -ItemType File -Recursive

    $hashes = $files | ForEach-Object {
        [PSCustomObject]@{
            FileUrl = $_.ServerRelativeUrl
            FileName = $_.Name
            Modified = $_.TimeLastModified
            Hash = Get-DocumentHash -FileUrl $_.ServerRelativeUrl
            CaptureDate = Get-Date
        }
    }

    return $hashes
}
```

### Step 5: Configure Staleness Detection

**Define Staleness Thresholds:**

| Content Type | Staleness Threshold | Action |
|--------------|--------------------|----|
| Product Information | 30 days | Alert content owner |
| Regulatory Guidance | 90 days | Alert + compliance review |
| Procedures/Policies | 180 days | Alert + mandatory review |
| FAQs | 60 days | Alert content owner |
| Training Materials | 365 days | Annual review |

**Power Automate Staleness Check:**

```plaintext
Trigger: Recurrence (Weekly)

Actions:
├── Get all approved knowledge sources from registry
├── For each knowledge source:
│   ├── Check last modified date of source content
│   ├── Calculate days since last modification
│   ├── Compare against staleness threshold
│   └── If stale:
│       ├── Send alert to content owner
│       ├── Update registry: StaleAlert = True
│       └── If critically stale (2x threshold):
│           ├── Escalate to AI Governance Lead
│           └── Consider temporary source suspension
```

**KQL Query for Stale Sources:**

```kql
// Identify stale knowledge sources
let stalenessThreshold = 90d;
SharePointAuditLogs
| where TimeGenerated > ago(365d)
| where Operation in ("FileModified", "FileUploaded")
| summarize LastModified = max(TimeGenerated) by SiteUrl
| extend DaysSinceModified = datetime_diff('day', now(), LastModified)
| where DaysSinceModified > stalenessThreshold
| project SiteUrl, LastModified, DaysSinceModified, Status = "Stale"
| order by DaysSinceModified desc
```

### Step 6: Establish Review Cadence

**Review Schedule by Zone:**

| Zone | Review Frequency | Reviewer | Scope |
|------|------------------|----------|-------|
| Zone 1 | Annual | Content Owner | Accuracy check |
| Zone 2 | Quarterly | Content Owner + AI Governance | Accuracy + relevance |
| Zone 3 | Monthly | Content Owner + Compliance + AI Governance | Full validation |

**Review Checklist:**

```markdown
# Knowledge Source Review Checklist

## Source Information
- **Source Name:** [Name]
- **Source URL:** [URL]
- **Agent(s) Using Source:** [List agents]
- **Review Date:** [Date]
- **Reviewer:** [Name]

## Accuracy Validation
- [ ] Content is factually accurate
- [ ] No outdated information present
- [ ] Statistics and figures are current
- [ ] References are valid and accessible
- [ ] No conflicting information with other sources

## Compliance Check
- [ ] Content meets sensitivity classification
- [ ] No PII/NPI exposed inappropriately
- [ ] Regulatory references are current
- [ ] Disclaimers are present where required

## Quality Assessment
- [ ] Content is clearly written
- [ ] No ambiguous statements
- [ ] Appropriate for AI grounding
- [ ] No potential for misinterpretation

## Approval
- [ ] Approved for continued use
- [ ] Approved with modifications required
- [ ] Suspended pending updates
- [ ] Revoked (remove from agent)

## Notes
[Reviewer notes and action items]

## Next Review Date
[Date based on zone schedule]
```

---

### PowerShell Configuration

### Comprehensive RAG Source Validation Script

```powershell
# ============================================================
# Control 2.16: RAG Source Integrity Validation
# Comprehensive Validation and Reporting Script
# ============================================================

param(
    [string]$RegistryListUrl = "https://tenant.sharepoint.com/sites/Governance/Lists/KnowledgeSourceRegistry",
    [string]$OutputPath = ".\RAG-Validation-$(Get-Date -Format 'yyyyMMdd')"
)

# Create output directory
New-Item -ItemType Directory -Path $OutputPath -Force | Out-Null

Write-Host "=== RAG Source Integrity Validation ===" -ForegroundColor Cyan

# ============================================================
# SECTION 1: Load Knowledge Source Registry
# ============================================================

Write-Host "`nSection 1: Loading knowledge source registry..." -ForegroundColor Yellow

Connect-PnPOnline -Url $RegistryListUrl -Interactive

$registryItems = Get-PnPListItem -List "KnowledgeSourceRegistry" -PageSize 500

$registry = $registryItems | ForEach-Object {
    [PSCustomObject]@{
        AgentId = $_["AgentId"]
        AgentName = $_["AgentName"]
        SourceType = $_["SourceType"]
        SourceUrl = $_["SourceUrl"]
        ContentOwner = $_["ContentOwner"]
        ApprovalStatus = $_["ApprovalStatus"]
        ApprovalDate = $_["ApprovalDate"]
        LastReviewDate = $_["LastReviewDate"]
        NextReviewDue = $_["NextReviewDue"]
        StalenessThreshold = $_["StalenessThreshold"]
    }
}

Write-Host "Loaded $($registry.Count) knowledge sources from registry"

# ============================================================
# SECTION 2: Validate Source Accessibility
# ============================================================

Write-Host "`nSection 2: Validating source accessibility..." -ForegroundColor Yellow

$accessResults = @()

foreach ($source in $registry) {
    try {
        if ($source.SourceType -eq "SharePoint Site") {
            Connect-PnPOnline -Url $source.SourceUrl -Interactive
            $site = Get-PnPWeb
            $accessible = $true
            $error = $null
        }
        # Add other source type checks as needed
        else {
            $accessible = $true
            $error = "Source type not validated"
        }
    }
    catch {
        $accessible = $false
        $error = $_.Exception.Message
    }

    $accessResults += [PSCustomObject]@{
        AgentId = $source.AgentId
        SourceUrl = $source.SourceUrl
        Accessible = $accessible
        Error = $error
    }
}

$inaccessible = $accessResults | Where-Object { -not $_.Accessible }
if ($inaccessible.Count -gt 0) {
    Write-Host "WARNING: $($inaccessible.Count) sources are inaccessible!" -ForegroundColor Red
    $inaccessible | Export-Csv -Path "$OutputPath\Inaccessible-Sources.csv" -NoTypeInformation
}
else {
    Write-Host "All sources accessible" -ForegroundColor Green
}

# ============================================================
# SECTION 3: Check Staleness
# ============================================================

Write-Host "`nSection 3: Checking for stale sources..." -ForegroundColor Yellow

$stalenessResults = @()

foreach ($source in ($registry | Where-Object { $_.SourceType -eq "SharePoint Site" })) {
    try {
        Connect-PnPOnline -Url $source.SourceUrl -Interactive

        # Get most recent modification
        $recentItems = Get-PnPListItem -List "Documents" -PageSize 10 |
            Sort-Object { $_["Modified"] } -Descending |
            Select-Object -First 1

        $lastModified = if ($recentItems) { $recentItems["Modified"] } else { $null }
        $daysSinceModified = if ($lastModified) {
            ((Get-Date) - [DateTime]$lastModified).Days
        } else { 999 }

        $threshold = if ($source.StalenessThreshold) { $source.StalenessThreshold } else { 90 }
        $isStale = $daysSinceModified -gt $threshold

        $stalenessResults += [PSCustomObject]@{
            AgentId = $source.AgentId
            SourceUrl = $source.SourceUrl
            LastModified = $lastModified
            DaysSinceModified = $daysSinceModified
            StalenessThreshold = $threshold
            IsStale = $isStale
        }
    }
    catch {
        Write-Warning "Could not check staleness for $($source.SourceUrl): $_"
    }
}

$stalesSources = $stalenessResults | Where-Object { $_.IsStale }
if ($staleSources.Count -gt 0) {
    Write-Host "WARNING: $($staleSources.Count) sources are stale!" -ForegroundColor Yellow
    $staleSources | Export-Csv -Path "$OutputPath\Stale-Sources.csv" -NoTypeInformation
}
else {
    Write-Host "No stale sources found" -ForegroundColor Green
}

# ============================================================
# SECTION 4: Check Approval Status
# ============================================================

Write-Host "`nSection 4: Checking approval status..." -ForegroundColor Yellow

$unapproved = $registry | Where-Object { $_.ApprovalStatus -ne "Approved" }
$pendingReview = $registry | Where-Object {
    $_.NextReviewDue -and [DateTime]$_.NextReviewDue -le (Get-Date)
}

Write-Host "Unapproved sources: $($unapproved.Count)"
Write-Host "Sources pending review: $($pendingReview.Count)"

if ($pendingReview.Count -gt 0) {
    $pendingReview | Export-Csv -Path "$OutputPath\Pending-Review.csv" -NoTypeInformation
}

# ============================================================
# SECTION 5: Generate Summary Report
# ============================================================

Write-Host "`nSection 5: Generating summary report..." -ForegroundColor Yellow

$summary = @{
    TotalSources = $registry.Count
    ApprovedSources = ($registry | Where-Object { $_.ApprovalStatus -eq "Approved" }).Count
    PendingSources = ($registry | Where-Object { $_.ApprovalStatus -eq "Pending" }).Count
    InaccessibleSources = $inaccessible.Count
    StaleSources = $staleSources.Count
    PendingReview = $pendingReview.Count
}

$html = @"
<!DOCTYPE html>
<html>
<head>
    <title>RAG Source Integrity Validation Report</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 40px; }
        h1 { color: #0078d4; }
        .dashboard { display: flex; gap: 20px; flex-wrap: wrap; margin: 20px 0; }
        .card { padding: 20px; background: #f5f5f5; border-radius: 8px; min-width: 150px; }
        .card.success { background: #dff6dd; }
        .card.warning { background: #fff4ce; }
        .card.danger { background: #fde7e9; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #0078d4; color: white; }
    </style>
</head>
<body>
    <h1>RAG Source Integrity Validation Report</h1>
    <p>Generated: $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")</p>

    <h2>Summary</h2>
    <div class="dashboard">
        <div class="card"><h3>Total Sources</h3><p style="font-size:28px;">$($summary.TotalSources)</p></div>
        <div class="card success"><h3>Approved</h3><p style="font-size:28px;">$($summary.ApprovedSources)</p></div>
        <div class="card warning"><h3>Pending Approval</h3><p style="font-size:28px;">$($summary.PendingSources)</p></div>
        <div class="card $(if ($summary.InaccessibleSources -gt 0) { 'danger' } else { 'success' })">
            <h3>Inaccessible</h3><p style="font-size:28px;">$($summary.InaccessibleSources)</p>
        </div>
        <div class="card $(if ($summary.StaleSources -gt 0) { 'warning' } else { 'success' })">
            <h3>Stale</h3><p style="font-size:28px;">$($summary.StaleSources)</p>
        </div>
        <div class="card $(if ($summary.PendingReview -gt 0) { 'warning' } else { 'success' })">
            <h3>Review Due</h3><p style="font-size:28px;">$($summary.PendingReview)</p>
        </div>
    </div>

    <h2>Action Items</h2>
    <ul>
        $(if ($summary.InaccessibleSources -gt 0) { "<li><strong>Critical:</strong> Review $($summary.InaccessibleSources) inaccessible sources</li>" })
        $(if ($summary.StaleSources -gt 0) { "<li><strong>High:</strong> Update $($summary.StaleSources) stale sources</li>" })
        $(if ($summary.PendingReview -gt 0) { "<li><strong>Medium:</strong> Complete $($summary.PendingReview) pending reviews</li>" })
        $(if ($summary.PendingSources -gt 0) { "<li><strong>Medium:</strong> Process $($summary.PendingSources) pending approvals</li>" })
    </ul>

    <h2>Next Steps</h2>
    <ol>
        <li>Address critical issues (inaccessible sources) immediately</li>
        <li>Schedule content owner meetings for stale sources</li>
        <li>Complete pending reviews before due dates</li>
        <li>Process pending approval requests</li>
    </ol>
</body>
</html>
"@

$html | Out-File -FilePath "$OutputPath\RAG-Validation-Report.html" -Encoding UTF8
Write-Host "Report generated: $OutputPath\RAG-Validation-Report.html" -ForegroundColor Green

Write-Host "`n=== Validation Complete ===" -ForegroundColor Cyan
```

---

## Financial Sector Considerations

### Regulatory Alignment

| Regulation | Requirement | How This Control Helps |
|------------|-------------|------------------------|
| **Fed SR 11-7** | Model risk management | Ensures data quality for AI models |
| **FDIC FIL-15-2025** | AI governance expectations | Validates knowledge source integrity |
| **OCC 2011-12** | Model inputs and data quality | Documents source approval and validation |
| **FINRA 4511** | Books and records | Citation logging creates audit trail |
| **SOX 302/404** | Internal controls | Approval workflow provides control evidence |

### Zone-Specific Configuration

**Zone 1 (Personal Productivity):**

- Document knowledge sources used
- Annual accuracy review
- Content owner identification
- Rationale: Basic tracking for low-risk personal agents

**Zone 2 (Team Collaboration):**

- Formal approval workflow required
- Quarterly accuracy reviews
- Citation logging enabled
- Staleness alerts configured
- Rationale: Shared agents need validated knowledge bases

**Zone 3 (Enterprise Managed):**

- Multi-level approval (Owner + Compliance + AI Governance)
- Monthly accuracy reviews
- Full citation audit trail
- Real-time staleness monitoring
- Integration with model risk management
- Rationale: Customer-facing agents require highest data quality

### FSI Configuration Example

```yaml
# FSI RAG Source Integrity Configuration
fsi_rag_governance:
  organization: "Investment Adviser"
  control_id: "2.16"

  approval_workflow:
    tier_1_agents:
      approvers: ["Content Owner"]
      review_frequency: "Annual"

    tier_2_agents:
      approvers: ["Content Owner", "AI Governance Lead"]
      review_frequency: "Quarterly"

    tier_3_agents:
      approvers: ["Content Owner", "Compliance Officer", "AI Governance Lead"]
      review_frequency: "Monthly"

  staleness_thresholds:
    regulatory_content: 30  # Days
    product_information: 60
    general_knowledge: 90
    training_materials: 365

  citation_logging:
    enabled: true
    retention_days: 2555  # 7 years
    include_confidence_scores: true

  integrity_checks:
    hash_verification: true
    change_detection: true
    unauthorized_modification_alert: true

  evidence_retention:
    approval_records: "7 years"
    review_records: "7 years"
    citation_logs: "7 years"
```

---

## Verification & Testing

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | Review knowledge source registry | All agents have documented sources |
| 2 | Submit test approval request | Workflow triggers correctly |
| 3 | Complete approval workflow | Source marked as approved |
| 4 | Verify citation logging | Agent citations appear in audit |
| 5 | Test staleness detection | Stale sources flagged |
| 6 | Run validation script | Report generated with findings |

### Compliance Checklist

- [ ] Knowledge source registry established
- [ ] Approval workflow configured
- [ ] Content owners assigned for all sources
- [ ] Citation logging enabled
- [ ] Staleness thresholds defined
- [ ] Review schedule established by zone
- [ ] Validation script running periodically
- [ ] Integration with model risk management (Level 4)

---

## Troubleshooting & Validation

<a id="troubleshooting"></a>

### Issue: Approval Workflow Not Triggering

**Symptoms:** New sources not routed for approval

**Resolution:**

1. Verify Power Automate flow is enabled
2. Check list trigger configuration
3. Confirm approver accounts are valid
4. Review flow run history for errors
5. Test with manual trigger

### Issue: Citation Logging Not Capturing Data

**Symptoms:** Agent responses don't show source citations

**Resolution:**

1. Verify audit logging is enabled (Control 1.7)
2. Check agent is configured to include citations
3. Confirm audit log query syntax is correct
4. Allow for audit log ingestion latency (up to 24h)
5. Verify Copilot Studio agent version supports citations

### Issue: Staleness Detection Missing Sources

**Symptoms:** Stale sources not flagged

**Resolution:**

1. Verify staleness threshold is set in registry
2. Check Power Automate schedule is running
3. Confirm access to source site for modification check
4. Review threshold calculation logic
5. Test with known stale source

---

## Additional Resources

<a id="microsoft-learn-references"></a>

- [Copilot Studio Knowledge Sources](https://learn.microsoft.com/en-us/microsoft-copilot-studio/knowledge-copilot-studio)
- [SharePoint Advanced Management](https://learn.microsoft.com/en-us/sharepoint/advanced-management)
- [Microsoft Purview Audit Logging](https://learn.microsoft.com/en-us/purview/audit-solutions-overview)
- [OCC SR 11-7 Model Risk Management](https://www.federalreserve.gov/supervisionreg/srletters/sr1107.htm)

---

## Related Controls

| Control | Relationship |
|---------|-------------|
| [Control 2.6: Model Risk Management](2.6-model-risk-management-alignment-with-occ-2011-12-sr-11-7.md) | MRM framework for agent governance |
| [Control 3.1: Agent Inventory](../pillar-3-reporting/3.1-agent-inventory-and-metadata-management.md) | Agent metadata including sources |
| [Control 4.1: IAG/RCD](../pillar-4-sharepoint/4.1-sharepoint-information-access-governance-iag-restricted-content-discovery.md) | Site access governance |
| [Control 4.6: Grounding Scope](../pillar-4-sharepoint/4.6-grounding-scope-governance.md) | Content inclusion/exclusion |

---

## Support & Questions

For implementation support or questions about this control, contact:

- **AI Governance Lead:** Source approval policy
- **Content Owners:** Source accuracy certification
- **Power Platform Admin:** Agent and workflow configuration
- **Compliance Officer:** Regulatory requirements for data quality

---

**Updated:** Jan 2026
**Version:** v1.0 (Jan 2026)
**UI Verification Status:** ❌ Needs verification
